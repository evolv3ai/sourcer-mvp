# Story 1.0: Setup Initial Project Structure and Core Configuration

## Status: Approved

## Story

-   As a Developer,
-   I want the initial project scaffold created as per the Architecture Document, including version control initialization and basic configuration files,
-   so that I have the correct and consistent workspace to start building the application features.

## Acceptance Criteria (ACs)

1.  The main project directory (e.g., `sourcer-mvp/`) is created and initialized as a Git repository.
2.  A standard `.gitignore` file suitable for Python projects is present.
3.  Core subdirectories (`src/sourcer`, `tests/unit`, `tests/integration`, `scripts`, `config`, `assets/icons`, `docs`, `.github/workflows`) are created as defined in the Architecture Document's Project Structure section.
4.  Initial essential Python package files (e.g., `src/sourcer/__init__.py`, `src/sourcer/core/__init__.py`, etc.) are created to define the package structure.
5.  Stub files for main application entry points (`src/sourcer/app.py`, `src/sourcer/main.py`) are created.
6.  Initial dependency files (`requirements.txt`, `requirements-dev.txt`) are created, listing at least the linters/formatters/testing tools from the tech stack.
7.  A `pyproject.toml` file is created with basic configurations for Black, Flake8, and MyPy.
8.  A stub configuration file (`config/settings.ini`) and an example environment file (`.env.example`) are present as per the architecture.
9.  A basic GitHub Actions workflow file (e.g., `main.yml`) is created in `.github/workflows/` that triggers on push/PR to `main` and runs linters, type checkers, and unit tests.

## Tasks / Subtasks

-   [ ] **Task 1: Initialize Project and Version Control (AC: 1)**
    -   [ ] Create the root project directory named `sourcer-mvp`.
    -   [ ] Initialize a Git repository within the `sourcer-mvp` directory.
-   [ ] **Task 2: Create Standard `.gitignore` File (AC: 2)**
    -   [ ] Create a `.gitignore` file in the project root.
    -   [ ] Populate it with common Python ignores (e.g., `__pycache__/`, `*.pyc`, `.venv/`, `*.egg-info/`, `dist/`, `build/`, `.mypy_cache/`, `.pytest_cache/`, `.env`).
-   [ ] **Task 3: Create Core Directory Structure (AC: 3)**
    -   [ ] Create the following directories at the project root:
        -   `src/`
        -   `tests/`
        -   `scripts/`
        -   `config/`
        -   `assets/`
        -   `docs/` (This directory will hold the sharded docs you are saving)
        -   `.github/`
    -   [ ] Inside `src/`, create `sourcer/`.
    -   [ ] Inside `tests/`, create `unit/` and `integration/`.
    -   [ ] Inside `assets/`, create `icons/`.
    -   [ ] Inside `.github/`, create `workflows/`.
    -   Refer to `docs/project-structure.md` for the full expected structure.
-   [ ] **Task 4: Create Initial Python Package Files (AC: 4)**
    -   [ ] Create `src/sourcer/__init__.py`.
    -   [ ] Create `src/sourcer/core/__init__.py`.
    -   [ ] Create `src/sourcer/services/__init__.py`.
    -   [ ] Create `src/sourcer/ui/__init__.py`.
    -   [ ] Create `src/sourcer/ui/widgets/__init__.py`.
    -   [ ] Create `src/sourcer/utils/__init__.py`.
    -   (All can be empty `__init__.py` files initially).
-   [ ] **Task 5: Create Stub Application Entry Point Files (AC: 5)**
    -   [ ] Create `src/sourcer/app.py` with a basic placeholder (e.g., a main application class stub or function).
        ```python
        # src/sourcer/app.py
        class SourcerApp:
            def __init__(self):
                print("SourcerApp initialized (stub)")

            def run(self):
                print("SourcerApp run (stub)")
        ```
    -   [ ] Create `src/sourcer/main.py` with a basic placeholder to launch the app.
        ```python
        # src/sourcer/main.py
        from .app import SourcerApp

        def main():
            print("Sourcer MVP - main.py (stub)")
            # app = SourcerApp()
            # app.run()

        if __name__ == "__main__":
            main()
        ```
-   [ ] **Task 6: Create Initial Dependency Files (AC: 6)**
    -   [ ] Create `requirements.txt` (can be empty or include core libraries like `python-pipecat` if version is known, `PyQt6`).
        ```txt
        # requirements.txt
        # Add runtime dependencies here, e.g.:
        # PyQt6==<version_from_tech_stack>
        # pipecat-ai==<version_from_tech_stack>
        # numpy==<version_from_tech_stack>
        # opencv-python==<version_from_tech_stack>
        # ultralytics==<version_from_tech_stack_for_yolo>
        # Pillow (often a dependency for vision models)
        ```
    -   [ ] Create `requirements-dev.txt` listing linters, formatters, and testing tools from `docs/tech-stack.md`.
        ```txt
        # requirements-dev.txt
        # Core dependencies for development tools
        black==<version_from_tech_stack>
        flake8==<version_from_tech_stack>
        mypy==<version_from_tech_stack>
        pytest==<version_from_tech_stack>
        pytest-mock==<version_from_tech_stack>
        pytest-cov 
        # Add other dev dependencies like specific flake8 plugins if known
        # flake8-bugbear
        # flake8-comprehensions
        # flake8-print
        ```
-   [ ] **Task 7: Create `pyproject.toml` (AC: 7)**
    -   [ ] Create `pyproject.toml` in the project root.
    -   [ ] Add basic configurations for Black, Flake8, and MyPy. Refer to `docs/operational-guidelines.md` for preferred settings.
        ```toml
        # pyproject.toml
        [tool.black]
        line-length = 88
        target-version = ['py311']

        [tool.flake8]
        max-line-length = 88
        extend-ignore = "E203" # whitespace before ':' (often conflicts with Black)
        # Add plugins if listed in requirements-dev.txt
        # e.g., select = "C,E,F,W,B,B9" 

        [tool.mypy]
        python_version = "3.11"
        warn_return_any = true
        warn_unused_configs = true
        disallow_untyped_defs = false # Start with false, aim for true later
        ignore_missing_imports = true # Initially true for smoother setup with many dependencies

        [tool.pytest.ini_options]
        minversion = "6.0"
        addopts = "-ra -q"
        testpaths = [
            "tests/unit",
            "tests/integration",
        ]
        python_files = "test_*.py"
        ```
-   [ ] **Task 8: Create Stub Configuration Files (AC: 8)**
    -   [ ] Create `config/settings.ini` with placeholder sections/keys if known, or empty.
        ```ini
        # config/settings.ini
        [General]
        # log_level = INFO

        [Paths]
        # model_base_path = models/ 
        # (Actual model paths might be derived or more specific)
        ```
    -   [ ] Create `.env.example` with placeholder environment variables.
        ```
        # .env.example
        # POSTHOG_API_KEY=
        # LOG_LEVEL=DEBUG
        ```
-   [ ] **Task 9: Create Basic GitHub Actions CI Workflow (AC: 9)**
    -   [ ] Create `.github/workflows/main.yml`.
    -   [ ] Define a workflow that triggers on push/PR to the `main` branch.
    -   [ ] The workflow should:
        -   Checkout code.
        -   Set up Python 3.11.
        -   Install dependencies from `requirements-dev.txt` and `requirements.txt`.
        -   Run Black (check mode), Flake8, and MyPy.
        -   Run Pytest.
    (Refer to Architecture Document for CI/CD details). Example snippet:
        ```yaml
        # .github/workflows/main.yml
        name: Python CI

        on:
          push:
            branches: [ main ]
          pull_request:
            branches: [ main ]

        jobs:
          build:
            runs-on: ubuntu-latest
            steps:
            - uses: actions/checkout@v3
            - name: Set up Python 3.11
              uses: actions/setup-python@v3
              with:
                python-version: "3.11"
            - name: Install dependencies
              run: |
                python -m pip install --upgrade pip
                pip install -r requirements-dev.txt
                pip install -r requirements.txt
            - name: Lint and Format Check with Black
              run: black --check .
            - name: Lint with Flake8
              run: flake8 src tests
            - name: Static Type Check with MyPy
              run: mypy src tests
            - name: Test with Pytest
              run: pytest
        ```

## Dev Technical Guidance

-   **Primary Goal:** Create a functional project skeleton that aligns with the structure defined in `docs/project-structure.md` and the tools specified in `docs/tech-stack.md` and `docs/operational-guidelines.md`.
-   **`.gitignore`:** Ensure common Python and OS-specific temporary files are ignored (e.g., `.DS_Store`, `Thumbs.db`). A good starting point can be found from standard Python gitignore templates.
-   **Stub Files:** Keep stub Python files minimal, primarily to establish the file structure and basic import paths. `app.py` and `main.py` should have enough to indicate their purpose.
-   **Configuration:** `settings.ini` can be very basic initially. `.env.example` should list variables that developers might want to override locally (even if few for MVP).
-   **CI Workflow:** The `main.yml` should provide a basic CI loop for linting, type-checking, and running tests on every push/PR to main to maintain code health from the start. Ensure it uses Python 3.11.
-   Refer to the `Sourcer-MVP-Architecture-Document.txt` for specific version numbers for tools in `requirements-dev.txt` and tool configurations in `pyproject.toml`.

## Story Progress Notes

### Agent Model Used: `<Agent Model Name/Version>`

### Completion Notes List
{Any notes about implementation choices, difficulties, or follow-up needed}

### Change Log