# Data Models

> This document is a granulated shard from the main "Sourcer MVP Architecture Document" focusing on "Data Models".

### Core Application Entities / Domain Objects [cite: 89]

#### `FrameData`

  - **Description:** Represents a single video frame captured from the webcam.
  - **Schema / Interface Definition:** [cite: 90]
    ```python
    from typing import NewType
    import numpy as np

    # Using numpy array for image data. Actual format (e.g., RGB, BGR)
    # will depend on webcam library and AI model input requirements.
    FrameData = NewType('FrameData', np.ndarray) [cite: 92]
    ```
  - **Validation Rules:** Must be a valid image format usable by OpenCV (likely interfaced by the webcam library) and the vision models.

#### `Query`

  - **Description:** Represents a user's query to the system.
  - **Schema / Interface Definition:** [cite: 94]
    ```python
    from dataclasses import dataclass
    from enum import Enum
    import time

    class QueryType(Enum):
        VOICE = "voice"
        TEXT = "text"

    @dataclass
    class Query:
        text: str          # The transcribed or typed query text
        type: QueryType    # Source of the query
        timestamp: float = time.time()   # Unix timestamp of query initiation [cite: 95]
    ```

#### `SceneDescription`

  - **Description:** Represents the textual description of the visual scene generated by the AI.
  - **Schema / Interface Definition:** [cite: 96]
    ```python
    from dataclasses import dataclass
    from typing import List, Dict, Any, Optional
    import time

    @dataclass
    class DetectedObject:
        label: str          # e.g., "cup", "book"
        confidence: float   # Confidence score from detector (0.0 to 1.0)
        bounding_box: List[int] # [x_min, y_min, x_max, y_max]

    @dataclass
    class SceneDescription:
        full_text: str             # Complete textual description from LLaVA
        objects: Optional[List[DetectedObject]] = None # Optional: Structured list of prominent objects
        timestamp: float = time.time()           # Unix timestamp of generation
        raw_model_outputs: Optional[Dict[str, Any]] = None # Optional: for debugging [cite: 97]
    ```

### API Payload Schemas (Internal)

These refer to the data passed between internal components/services.

#### `VisionService.analyze_frame` Input:

  - `frame: FrameData` [cite: 98]
  - `query_context: Optional[str]` (e.g., if the query provides specific focus) [cite: 98]

#### `VisionService.analyze_frame` Output:

  - `description: str` (The textual description to be used by TTS and UI) [cite: 98]

### Database Schemas (N/A for MVP)

No persistent database is required for the MVP's core functionality. Conversation history is session-based. [cite: 99]